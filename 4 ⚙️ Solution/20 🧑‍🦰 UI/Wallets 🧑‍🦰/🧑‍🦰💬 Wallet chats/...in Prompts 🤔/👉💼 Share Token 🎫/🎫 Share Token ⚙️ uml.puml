@startuml Wallet: Share Token


actor User as user
participant "Wallet ðŸ‘±\napp" as wallet
participant "Notifier ðŸ“£\ndomain" as notifier
participant "Broker ðŸ¤µ\ndomain" as broker

participant "Consumer ðŸ’¼\ndomain" as consumer
participant "Issuer ðŸŽ´\ndomain" as issuer
participant "Graph ðŸ•¸\ndomain" as graph

' --------------------
' QUERY
' --------------------


    'activate consumer
    consumer --> broker: 1) Query ðŸŒ
    'deactivate consumer

    activate broker
        broker -> graph: 2) Queryable ðŸš€ {codes}
        broker -> graph: 3) Translate ðŸš€ {codes}
        broker --> wallet: 4) âª Prompt ðŸ¤” {tokens}
    deactivate broker


    
    activate wallet
        user --> wallet: share
        wallet --> broker: {tokens}
    deactivate wallet

    activate broker
        broker --> notifier: 5) Share ðŸŒ
    deactivate broker

    activate notifier
        notifier --> wallet
    deactivate notifier

    activate wallet
        wallet --> consumer: 6) Receive ðŸŒ {tokens}
    deactivate wallet


    activate consumer
        
            consumer -> graph: 7) Trusts ðŸš€ {issuers}
            consumer -> graph: 8) PublicKey ðŸš€ {dkim}
            consumer -> broker: 9) âª Token status
        
        consumer --> consumer: process
    deactivate consumer

'end group 


@enduml 