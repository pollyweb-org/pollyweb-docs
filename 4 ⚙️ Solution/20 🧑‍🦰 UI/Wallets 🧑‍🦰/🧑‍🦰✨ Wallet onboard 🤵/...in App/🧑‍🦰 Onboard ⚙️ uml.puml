@startuml Setup

' -----------
actor User as user
participant "Wallet ğŸ‘±" as wallet
participant "Notifier ğŸ“£" as notifier
participant "Broker ğŸ¤µ" as broker
participant "Vault ğŸ—„ï¸" as vault

' WALLET
user --> wallet: install

activate wallet

    group Register public key

        wallet -> wallet: keys*
        wallet -> notifier: 1) Onboard ğŸš€ \n {public key}

        activate notifier
            notifier -> broker: 2) Onboard ğŸš€
        
            ' BROKER
            activate broker
                broker -> broker: wallet*
                broker -> notifier: {wallet ID}
            'deactivate broker 

            notifier -> wallet: {wallet ID}

        deactivate notifier

    deactivate wallet
end group


group Ask for region

    broker --> wallet: 3) âª Prompt {region?}
    deactivate broker

    activate wallet
        user --> wallet: region
        wallet --> broker: {region}
    deactivate wallet
    
    activate broker
        
end group 


group Bind agents (loop)

    broker --> vault: 4) Bind â©
    broker --> wallet: âª Prompt {agent defaulted!}

end group

broker --> wallet: âª Prompt {done!}

deactivate broker 

' -----------
@enduml