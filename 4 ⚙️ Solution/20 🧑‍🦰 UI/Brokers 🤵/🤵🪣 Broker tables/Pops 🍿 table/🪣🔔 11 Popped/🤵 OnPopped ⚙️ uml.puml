@startuml Pop@Broker
 
participant "Wallet ğŸ‘±" as wallet

box Broker ğŸ¤µ domain #FFFFFA
    participant "Pop@ ğŸ“ƒ" as pop
    participant "Pops ğŸª£" as pops
    participant "OnPopped@ ğŸ””" as popped
    participant "Opened@ ğŸ“ƒ" as opened
end box


wallet --> pop: Pop ğŸŒ 

activate pop
    pop -> pops: SAVE ğŸ’¾
deactivate pop

activate pops
    pops --> popped: POPPED ğŸ””
deactivate pops

activate popped
    popped --> wallet: SEND ğŸ“¬ Open ğŸŒ {pop}
deactivate popped

activate wallet
    wallet --> opened: Opened ğŸŒ 
deactivate wallet

activate opened
    opened -> pops: SAVE ğŸ’¾ {OPENED}
deactivate opened

@enduml 
