@startuml OnPopLocalize
 
participant "Wallet ðŸ‘±" as wallet
box Broker ðŸ¤µ domain #FFFFFA
    participant "OnWallet ðŸ””" as onWallet
    participant "Pops ðŸª£" as popsTable
    participant "OnLocalize ðŸ””" as onLocalized
    participant "Wallets ðŸª£" as walletsTable
end box
box Hosted ðŸ“¦ domain #FFFFFA
    participant "Regions ðŸª£" as regions
end box

wallet --> onWallet: Pop ðŸŒ {WALLET}

activate onWallet
    wallet --> onWallet: {localize}
    onWallet -> popsTable: SAVE ðŸ’¾ {LOCALIZE}
deactivate onWallet

activate popsTable
    popsTable --> onLocalized: LOCALIZE ðŸ””
deactivate popsTable

activate onLocalized
    onLocalized -> onLocalized: CHAT ðŸ’¬ 
    onLocalized -> regions: SELECT {.Hosted.Assets.Regions}
    onLocalized -> wallet: ONE ðŸ¤” {region?}
    onLocalized -> wallet: CONFIRM ðŸ¤” {change?}
    onLocalized -> walletsTable: SAVE ðŸ’¾ {language:new}
    onLocalized --> wallet: SUCCESS âœ… {changed}
deactivate onLocalized

activate wallet
    wallet --> onLocalized: {revert}
deactivate wallet

activate onLocalized
    onLocalized -> walletsTable: SAVE ðŸ’¾ {language:old}
    onLocalized --> wallet: SUCCESS âœ… {reverted}
deactivate onLocalized

@enduml 
