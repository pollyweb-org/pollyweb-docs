@startuml Broker.Queries

participant "Consumer ğŸ’¼" as consumer
box Broker ğŸ¤µ domain #FFFFFA
    participant "Query ğŸŒ" as script
    participant "Queries ğŸª£" as queries
    participant "Forms ğŸª£" as forms
end box
participant "Graph ğŸ•¸" as graph
participant "Wallet ğŸ‘±" as wallet
participant "Vault ğŸ—„ï¸" as vault

consumer -> script: Query ğŸŒ

activate script
    script -> queries: ğŸ’¾ QUERIED
deactivate script

activate queries
    queries -> forms: informed?
deactivate queries

activate forms
    forms -> queries: ğŸ’¾ INFORMED or ABRUPT
deactivate forms

activate queries
    queries -> graph: IF INFORMED: Trusts @ Graph ğŸš€
deactivate queries

activate graph
    graph -> queries: ğŸ’¾ DETAILED
deactivate graph

activate queries
    queries -> wallet: CONFIRM ğŸ‘ "Share?"
deactivate queries

activate wallet
    wallet -> queries: ğŸ’¾ DISCLOSED or SHARED
deactivate wallet

activate queries
    queries -> wallet: IF SHARED: Share @ Notifier ğŸŒ
    queries -> vault: IF DISCLOSED: Disclose @ Vault ğŸŒ
deactivate queries


@enduml