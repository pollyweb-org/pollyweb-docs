@startuml OnQuerySelected

box Broker ğŸ¤µ domain #FFFFFA
    participant "Queries ğŸª£" as table
    participant "OnSelected ğŸ””" as handler
    participant "Schemas ğŸª£" as schemas
end box
participant "Wallet ğŸ‘±" as wallet


activate table
    table --> handler: SELECTED ğŸ””
deactivate table

activate handler

    handler -> schemas: READ ğŸ§²
    handler -> wallet: CONFIRM ğŸ‘ "share?"

    alt IF IsEmpty
        handler -> table: SAVE ğŸ’¾ {REJECTED} 
    else IF Bind
        handler -> table: SAVE ğŸ’¾ {DISCLOSED} 
    else IF Token
        handler -> table: SAVE ğŸ’¾ {SHARED}
    end

deactivate handler

@enduml