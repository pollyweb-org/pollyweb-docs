@startuml OnPromptInserted

box Broker ğŸ¤µ domain #FFFFFA
    participant "Queries ğŸª£" as table
    participant "OnQueried ğŸ””" as handler
    participant "Chats ğŸª£" as chats
    participant "Forms ğŸª£" as forms
end box
participant "Wallet ğŸ‘±" as wallet


activate table
    table --> handler: QUERIED ğŸ””
deactivate table

activate handler
    handler -> chats: READ ğŸ§²
    handler -> forms: 

    alt Is schema informed?
        handler -> table: SAVE ğŸ’¾ {INFORMED}
    else
        handler -> table: SAVE ğŸ’¾ {ABRUPT}
    end 
deactivate handler

@enduml