@startuml OnTokenOffered

box Broker ðŸ¤µ domain #FFFFFA
    participant "OnDetailed ðŸ””" as detailed
    participant "Tokens ðŸª£" as tokens
    participant "OnOffered ðŸ””" as offered
end box
participant "Notifier ðŸ“£" as notifier
''participant "Wallet ðŸ‘±" as wallet

activate detailed
    detailed -> tokens: SAVE ðŸ’¾ {OFFERED}
deactivate detailed

activate tokens
    tokens --> offered: OFFERED ðŸ””
deactivate tokens

activate offered
    group IF accepted
        offered --> notifier: SEND ðŸ“¬ {Save ðŸŒ token}
    end group
    group IF declined
        offered -> tokens: SAVE ðŸ’¾ {DECLINED}
deactivate offered
    end group
    

@enduml 