@startuml OnTokenAccepted

participant "Issuer ğŸ´" as issuer
box Broker ğŸ¤µ domain #FFFFFA
    participant "Offer ğŸŒ" as script
    participant "Tokens ğŸª£" as tokens
    participant "OnAccepted ğŸ””" as change
end box
participant "Wallet ğŸ‘±" as wallet


issuer --> script: Offer ğŸŒ {hook}

activate script
    script -> tokens: SAVE ğŸ’¾ {OFFERED}
deactivate script

activate tokens
    tokens --> tokens: SAVE ğŸ’¾ {ACCEPTED}
    tokens --> change: ACCEPTED ğŸ””
deactivate tokens

activate change
    change --> wallet: SEND ğŸ“¬ {Save ğŸŒ hook, id}
deactivate change

@enduml 