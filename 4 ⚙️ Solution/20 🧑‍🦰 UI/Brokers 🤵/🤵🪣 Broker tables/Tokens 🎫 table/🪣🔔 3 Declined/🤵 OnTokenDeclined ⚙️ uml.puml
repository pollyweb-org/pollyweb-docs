@startuml OnTokenDeclined

participant "Issuer ğŸ´" as issuer
box Broker ğŸ¤µ domain #FFFFFA
    participant "Offer ğŸŒ" as script
    participant "Tokens ğŸª£" as tokens
    participant "OnDeclined ğŸ””" as change
end box


issuer --> script: Offer ğŸŒ

activate script
    script -> tokens: SAVE ğŸ’¾ {OFFERED}
deactivate script

activate tokens
    tokens --> tokens: SAVE ğŸ’¾ {DECLINED}
    tokens --> change: DECLINED ğŸ””
deactivate tokens

activate change
    change --> issuer: SEND ğŸ“¬ {Declined ğŸŒ}
deactivate change

@enduml 