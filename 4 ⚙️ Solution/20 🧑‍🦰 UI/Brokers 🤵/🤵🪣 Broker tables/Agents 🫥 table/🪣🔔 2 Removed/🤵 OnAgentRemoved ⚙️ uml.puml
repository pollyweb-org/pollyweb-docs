@startuml OnAgentRemoved


box Broker ğŸ¤µ domain #FFFFFA
    participant "Script ğŸ“ƒ" as script
    participant "Agents ğŸª£" as agents
    participant "OnRemoved ğŸ””" as handler
end box

participant "Vault ğŸ—„ï¸" as vault
'participant "Wallet ğŸ‘±" as wallet
'participant "Notifier ğŸ“£" as notifier
'wallet --> script: Pop ğŸŒ

activate script
    script -> agents: SAVE ğŸ’¾
activate agents
    script -> agents: DELETE ğŸ—‘ ï¸
deactivate script
    agents --> handler: CHANGED ğŸ””
deactivate agents

activate handler
    handler --> vault: SEND ğŸ“¬ {Unassigned@}
deactivate handler


@enduml 
