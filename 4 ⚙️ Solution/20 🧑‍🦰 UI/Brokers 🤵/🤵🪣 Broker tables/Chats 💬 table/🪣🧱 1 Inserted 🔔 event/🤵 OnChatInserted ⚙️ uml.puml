@startuml OnChatInserted

participant "Wallet ğŸ‘±" as wallet
box Broker ğŸ¤µ domain #FFFFFA
    participant "Chats ğŸª£" as table
    participant "OnInserted ğŸ””" as handler
    participant "Talker ğŸ˜ƒ" as talker
end box
participant "Printer ğŸ–¨ï¸" as printer


wallet --> table: Locate ğŸŒ
activate table
    wallet --> table: Pop ğŸŒ
    table --> handler: INSERTED ğŸ””
deactivate table

activate handler
    group IF key.IsEmpty

        handler -> talker: PARSE ğŸ”† {locator}

        group WHILE locator.IsAlias 

            handler -> printer: SEND ğŸš€ Resolve 

            activate printer
                printer -> handler: {host locator}
            deactivate printer

            handler -> talker: PARSE ğŸ”† {locator}

        end group
    end group

    handler -> table: SAVE ğŸ’¾ {RESOLVED}

deactivate handler

@enduml 
