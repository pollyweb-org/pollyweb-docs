@startuml OnChatOpened

participant "Wallet ğŸ‘±" as wallet
box Broker ğŸ¤µ domain #FFFFFA
    participant "Opened ğŸŒ" as script
    participant "Chats ğŸª£" as chats
    participant "OnOpened ğŸ””" as handler
end box
participant "Finder ğŸ”" as finder
participant "Broker ğŸ¤µ" as broker


wallet --> script: Opened ğŸŒ

activate script
    script -> chats: SAVE ğŸ’¾ {OPENED}
deactivate script

activate chats
    chats --> handler: OPENED ğŸ””
deactivate chats

alt IF Host is Broker

    activate handler
        handler -> chats: ğŸ’¾ ACTIVE

end

    
        handler -> finder: ğŸ¤² INVITE 
        handler -> broker: ğŸ¤² INVITE 
        handler -> chats: ğŸ’¾ PRESENTED
    deactivate handler


@enduml