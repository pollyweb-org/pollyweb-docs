@startuml OnChatActivated


box Broker ğŸ¤µ domain #FFFFFA
    participant "Opened ğŸŒ" as opened
    participant "Chats ğŸª£" as chats
    participant "OnActivated ğŸ””" as handler
    participant "Pops ğŸª£" as pops
    participant "Chatters ğŸª£" as chatters
end box

opened -->  chats: SAVE ğŸ’¾ {ACTIVE}

activate chats
    chats --> handler: ACTIVE ğŸ””
deactivate chats

activate handler
    alt IF is Broker
        handler -> pops: SAVE ğŸ’¾ {POPPED}
    else
        handler -> chatters: SAVE ğŸ’¾ {HOST}
    end alt
deactivate handler


@enduml