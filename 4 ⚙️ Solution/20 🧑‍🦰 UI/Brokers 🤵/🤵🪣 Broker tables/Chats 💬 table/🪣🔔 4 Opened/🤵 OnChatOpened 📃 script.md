# ğŸ¤µ OnChatOpened ğŸ“ƒ script

> Purpose
* [Script ğŸ“ƒ](<../../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Script ğŸ“ƒ.md>) that reacts to the [`Opened@Broker` ğŸ…°ï¸ method](<../../../ğŸ¤µğŸ…°ï¸ Broker methods/Chats ğŸ’¬ Opened ğŸ§‘â€ğŸ¦°ğŸŒğŸ¤µ/ğŸ¤µ Opened ğŸŒ msg.md>).

<br/>

## Diagram

![alt text](<ğŸ¤µ OnChatOpened âš™ï¸ uml.png>)

<br/>

## Script

```yaml
ğŸ“ƒ OnChatOpened:

# Assert the Chat
- ASSERT|$Chat:
    AllOf: Wallet, Host
    UUIDs: Wallet
    Texts: Host

# Verify if it's a Pop@Broker
- IF|$Chat.Host.Is($.Hosted.Domain):

    Then: # Add the Broker to the Chat
        SAVE|Broker.Chatters:
            .State: POP
            Domain: $.Hosted.Domain
            Role: VAULT
            Chat: $Chat.ID

    Else: # Add the Finder to the Chat
        SAVE|Broker.Chatters:
            .State: FINDER
            Domain: $Chat.Wallet.Finder
            Role: VAULT
            Chat: $Chat.ID
```


| Uses | |
|-|-
| [Commands âŒ˜](<../../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Command âŒ˜.md>)  | [`ASSERT`](<../../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for holders ğŸ§ /ASSERT ğŸš¦/ğŸš¦ ASSERT âŒ˜ cmd.md>) [`IF`](<../../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for control â–¶ï¸/IF â¤µï¸/â¤µï¸ IF âŒ˜ cmd.md>) [`SAVE`](<../../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for datasets ğŸª£/SAVE ğŸ’¾/ğŸ’¾ SAVE âŒ˜ cmd.md>)
| [Datasets ğŸª£](<../../../../../30 ğŸ§© Data/Datasets ğŸª£/ğŸª£ Dataset.md>) | [`Chats`](<../ğŸª£ Chats/ğŸ¤µ Broker.Chats ğŸª£ table.md>) [`Chatters`](<../../Chatters ğŸ‘¥ table/ğŸª£ Chatters/ğŸ¤µ Broker.Chatters ğŸª£ table.md>) [`Wallets`](<../../Wallets ğŸ§‘â€ğŸ¦° table/ğŸª£ Wallets/ğŸ¤µ Broker.Wallets ğŸª£ table.md>)
| [{Functions} ğŸ](<../../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Function ğŸ.md>) | [`.Is`](<../../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Functions ğŸ/ğŸ System ğŸ”© functions/Is â“•.md>)
| [Holders ğŸ§ ](<../../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Holder ğŸ§ .md>) | [`$.Hosted`](<../../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Holders ğŸ§ /System holders ğŸ”©/$.Hosted ğŸ“¦/ğŸ“¦ $.Hosted ğŸ§  holder.md>)
|