@startuml OnChatInserted

participant "Wallet ğŸ‘±" as wallet

box Broker ğŸ¤µ domain #FFFFFA
    participant "Chats ğŸª£" as table
    participant "OnInserted ğŸ””" as handler
end box

participant "Printer ğŸ–¨ï¸" as printer


wallet --> table: Locate ğŸŒ
activate table
    wallet --> table: Pop ğŸŒ
    table --> handler: INSERTED ğŸ””
deactivate table

activate handler

    alt If locator is ALIAS
        handler -> printer: SEND ğŸ“¬ {Resolve ğŸš€, locator}
    
        activate printer
            printer -> handler: {HOST locator}
        deactivate printer

    end

    handler -> table: SAVE ğŸ’¾ {RESOLVED}
deactivate handler

@enduml 
