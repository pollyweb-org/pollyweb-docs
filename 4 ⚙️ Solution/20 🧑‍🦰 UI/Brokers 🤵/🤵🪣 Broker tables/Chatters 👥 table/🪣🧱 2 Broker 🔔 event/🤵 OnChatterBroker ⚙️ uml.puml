@startuml OnChatterBroker

participant "Finder ğŸ”" as finder
box Broker ğŸ¤µ domain #FFFFFA
    participant "Chats ğŸª£" as chats
    participant "Chatters ğŸª£" as table
    participant "OnBroker ğŸ””" as handler
end box

participant "Wallet ğŸ‘±" as wallet

finder --> chats: Presented ğŸŒ

activate chats
    chats --> table: SAVE ğŸ’¾ {BROKER}
deactivate chats

activate table
    table --> handler: BROKER ğŸ””
deactivate table

activate handler
    handler -> handler: CHAT ğŸ’¬
    handler --> wallet: INFO â“˜ {reason}
    handler --> wallet: INFO â“˜ {shared binds}
    handler --> wallet: INFO â“˜ {shared tokens}
    handler -> chats: SAVE ğŸ’¾ {ACTIVE}
deactivate handler

@enduml