# ðŸ¤µ OnPopChat ðŸ“ƒ handler

> Part of the [`Broker.Pops` ðŸª£ table](<../../../ðŸ¤µðŸª£ Broker tables/Pops ðŸŽˆ table/ðŸª£ Pops/ðŸ¤µ Broker.Pops ðŸª£ table.md>)

> Purpose
* [Script ðŸ“ƒ](<../../../../../35 ðŸ’¬ Chats/Scripts ðŸ“ƒ/Script ðŸ“ƒ.md>) that reacts to a Pop in a [Chat ðŸ’¬](<../../../../../35 ðŸ’¬ Chats/Chats ðŸ’¬/ðŸ’¬ Chat.md>).

<br/>

## Diagram

![alt text](<ðŸ¤µ PopChat âš™ï¸ uml.png>)

<br/>

## Script

```yaml
ðŸ“ƒ PopChat:

# Assert the inputs
- ASSERT:
    $.Chat.Wallet: 
    $.Chat.Inputs.Chat:

# Get the Chat
- SELECT >> $chat:
    From: Broker.Chats
    Where: 
        ID: $.Chat.Inputs.Chat
        Wallet: $.Chat.Wallet

# Prepare options
- IF|$chat.State.Is(ACTIVE):
    PUT +> $options:
        ðŸƒ /Abandon chat

# Exit if there are no options available
- IFNOT|$options:
    RETURN

# Prompt the user for options
- ONE|What do you need? >> $option:
    Options: $options

# Process the user's option
- CASE|$option:
    Abandon: 
        RUN|PopChatAbandon
```

Uses||
|-|-
| [Commands âŒ˜](<../../../../../35 ðŸ’¬ Chats/Scripts ðŸ“ƒ/Command âŒ˜.md>) | [`ASSERT`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for holders ðŸ§ /ASSERT ðŸš¦/ðŸš¦ ASSERT âŒ˜ cmd.md>)  [`CASE`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for control â–¶ï¸/CASE â¯ï¸/â¯ï¸ CASE âŒ˜ cmd.md>) [`IF`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for control â–¶ï¸/IF â¤µï¸/â¤µï¸ IF âŒ˜ cmd.md>) [`IFNOT`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for control â–¶ï¸/IFNOT â¤µï¸/â¤µï¸ IFNOT âŒ˜ cmd.md>) [`INFO`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Prompts ðŸ¤”/ðŸ¤” Status âš ï¸ prompts/INFO â„¹ï¸/INFO â„¹ï¸ prompt.md>) [`ONE`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Prompts ðŸ¤”/ðŸ¤” Input âœï¸ prompts/ONE 1ï¸âƒ£/ONE 1ï¸âƒ£ prompt.md>) [`PUT`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for holders ðŸ§ /PUT â¬‡ï¸/â¬‡ï¸ PUT âŒ˜ cmd.md>) [`RETURN`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for control â–¶ï¸/RETURN â¤´ï¸/â¤´ï¸ RETURN âŒ˜ cmd.md>) [`RUN`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for control â–¶ï¸/RUN ðŸƒ/ðŸƒ RUN âŒ˜ cmd.md>) [`SELECT`](<../../../../../37 Scripts ðŸ“ƒ/ðŸ“ƒ Commands âŒ˜/âŒ˜ for holders ðŸ§ /SELECT ðŸ…¾ï¸/ðŸ…¾ï¸ SELECT âŒ˜ cmd.md>) 
| [Datasets ðŸª£](<../../../../../30 ðŸ§© Data/Datasets ðŸª£/ðŸª£ Dataset.md>) | [`Chats`](<../../../ðŸ¤µðŸª£ Broker tables/Chats ðŸ’¬ table/ðŸª£ Chats/ðŸ¤µ Broker.Chats ðŸª£ table.md>) [`Pops`](<../../../ðŸ¤µðŸª£ Broker tables/Pops ðŸŽˆ table/ðŸª£ Pops/ðŸ¤µ Broker.Pops ðŸª£ table.md>) 
|