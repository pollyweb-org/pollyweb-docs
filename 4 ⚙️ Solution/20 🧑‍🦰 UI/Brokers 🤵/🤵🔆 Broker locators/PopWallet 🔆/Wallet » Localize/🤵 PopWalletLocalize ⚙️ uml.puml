@startuml PopWalletLocalize
 
participant "Wallet ðŸ‘±" as wallet
box Broker ðŸ¤µ domain #FFFFFA
    participant "Wallet ðŸ”†" as onWallet
    participant "Localize ðŸ”†" as onLocalized
    participant "Wallets ðŸª£" as walletsTable
end box


wallet -> onWallet: Pop ðŸŽˆ {WALLET}

activate onWallet
    wallet -> onWallet: "localize"
    onWallet -> onLocalized: RUN {wallet}
deactivate onWallet

activate onLocalized
    onLocalized -> wallet: ONE ðŸ¤” {region?}
    onLocalized -> wallet: CONFIRM ðŸ¤” {change?}
    onLocalized -> walletsTable: SAVE ðŸ’¾ {language:new}
    onLocalized -> wallet: DONE âœ… {changed}
deactivate onLocalized

'activate wallet
    wallet -> onLocalized: {revert}
'deactivate wallet

activate onLocalized
    onLocalized -> walletsTable: SAVE ðŸ’¾ {language:old}
    onLocalized -> wallet: DONE âœ… {reverted}
deactivate onLocalized

@enduml 
