# ğŸ¤µ Opened ğŸ“ƒ handler

> Purpose
* [Script ğŸ“ƒ](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Script ğŸ“ƒ.md>) that implements the [`Opened@Broker` ğŸŒ msg](<ğŸ¤µ Opened ğŸŒ msg.md>).

## Diagram

![alt text](<ğŸ¤µ Opened âš™ï¸ uml.png>)

## Script

```yaml
ğŸ“ƒ Opened@Broker:

# Verify the required inputs
- ASSERT|$.Msg:
    AllOf: Chat, PublicKey
    UUIDs: Chat, From
    Texts: PublicKey

# Get the Wallet
- READ >> $wallet:
    Set: Broker.Wallets
    Key: $.Msg.From

# Verify the message with the Wallet's PublicKey
- VERIFY|$.Msg:
    PublicKey: $wallet.PublicKey

# Read the chat
- READ >> $chat:
    Set: Broker.Chats
    Key: $.Msg.Chat
    Assert: 
        Wallet: $wallet.ID

# Process the Chat state
- SAVE|$chat:
    .State: OPENED
    PublicKey: $.Msg.PublicKey
```

Uses||
|-|-
|[Commands âŒ˜](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Command âŒ˜.md>) | [`ASSESS`](<../../ğŸ¤µâ© Broker flows/Locate ğŸ”†â©ğŸ¤µ/ğŸ¤µ Locate â© flow.md>)   [`READ`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for datasets ğŸª£/READ ğŸ§²/ğŸ§² READ âŒ˜ cmd.md>) [`SAVE`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for datasets ğŸª£/SAVE ğŸ’¾/ğŸ’¾ SAVE âŒ˜ cmd.md>) [`VERIFY`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for messages ğŸ“¨/VERIFY ğŸ”/ğŸ” VERIFY âŒ˜ cmd.md>)
| [Datasets ğŸª£](<../../../../30 ğŸ§© Data/Datasets ğŸª£/ğŸª£ Dataset.md>) | [`Broker.Chats`](<../../ğŸ¤µğŸª£ Broker tables/Chats ğŸ’¬ table/ğŸª£ Chats/ğŸ¤µ Broker.Chats ğŸª£ table.md>)
| [Holders ğŸ§ ](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Holder ğŸ§ .md>) | [`$.Msg`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Holders ğŸ§ /System holders ğŸ”©/$.Msg ğŸ“¨/ğŸ“¨ $.Msg ğŸ§  holder.md>)
|