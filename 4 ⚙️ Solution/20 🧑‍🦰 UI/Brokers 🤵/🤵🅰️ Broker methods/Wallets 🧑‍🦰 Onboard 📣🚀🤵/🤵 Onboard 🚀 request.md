<!-- Docs: https://quip.com/zaYoA4kibXAP/-Broker-Wallets#temp:C:DQN1f2d80d98fdd4e69a98a32887 -->
<!-- Source: https://github.com/jorgemjfonseca/domain-trust-framework/blob/143c4c876bdd0dd8b120bdfecf20ef6b268ad20f/python/roles/broker/BROKER_WALLETS.py#L40 -->

<!-- TODO: add a script diagram -->

# ğŸ“£ğŸš€ğŸ¤µ Onboard @ Broker


> Used in [Onboard ğŸ‘‰](<../../../Wallets ğŸ§‘â€ğŸ¦°/ğŸ§‘â€ğŸ¦°âœ¨ Wallet onboard ğŸ¤µ/...in App/ğŸ§‘â€ğŸ¦° Onboard ğŸ’¬ flow.md>)
> 
<br/>

## Sync Request ğŸš€


```yaml
Header:
    From: any-notifier.dom
    To: any-broker.dom
    Subject: Onboard@Broker

Body:
    Language: en-us
    PublicKey: MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDH+wPr...
```

|Object|Property|Type|Description
|-|-|-|-
|Header|`From`|domain| [Notifier ğŸ“£ domain](<../../../Notifiers ğŸ“£/ğŸ“£ğŸ‘¥ Notifier domain.md>) name
||`To`|domain| [Broker ğŸ¤µ domain](<../../ğŸ¤µğŸ¤² Broker helper.md>) name
||`Subject`| string | `Onboard@Broker`
|Body| `Language` | enum | ISO language code.
|| `PublicKey`| string | Public part of the key-pair generated by the [Wallet ğŸ§‘â€ğŸ¦° app](<../../../Wallets ğŸ§‘â€ğŸ¦°/ğŸ§‘â€ğŸ¦°ğŸ› ï¸ Wallet app.md>).
|

<br/>


## Sync Response

```yaml
Wallet: <wallet-uuid>
```

|Property|Type|Description
|-|-|-
| `Wallet` | uuid | The newly generated Wallet ID.
|

<br/>

## Handler

```yaml
# Get the Notifier
# GET|Notifiers@Broker|$.Msg.From >> $notifier

# Generate a new Wallet ID
- EVAL|.UUID >> $wallet

# Save the Wallet
- SAVE|BrokerWallets:
    Wallet: $wallet
    Notifier: $.Msg.From
    PublicKey: $.Msg.PublicKey
    Language: $.Msg.Language

# Return the ID
- REEL:
    $wallet
```


| [Command âŒ˜](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/ğŸ“ƒ basics/Command âŒ˜.md>) | Purpose
|-|-
| ğŸ“¨ [`$.Msg`](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/ğŸ“ƒ holders ğŸ§ /$.Msg ğŸ“¨/ğŸ“¨ $.Msg ğŸ§  holder.md>) | Read the incoming [Message ğŸ“¨](<../../../../30 ğŸ§© Data/Messages ğŸ“¨/ğŸ“¨ Message/ğŸ“¨ Message.md>)
| ğŸ§² [`GET`](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/ğŸ“ƒ datasets ğŸª£/GET ğŸ§²/ğŸ§² GET âŒ˜ cmd.md>) | Get the [Hook ğŸª](<../../../../35 ğŸ’¬ Chats/Talkers ğŸ˜ƒ/ğŸ˜ƒğŸª£ Talker tables/ğŸ˜ƒ TalkerHooks ğŸª£ table.md>) from [`Bindable@Broker`](<../Binds ğŸ”— Bindable ğŸ—„ï¸ğŸŒğŸ¤µ/ğŸ¤µ Bindable ğŸŒ msg.md>)  
| ğŸ’¾ [`SAVE`](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/ğŸ“ƒ datasets ğŸª£/SAVE ğŸ’¾/ğŸ’¾ SAVE âŒ˜ cmd.md>) | Save the [Bind ğŸ”—](<../../../../30 ğŸ§© Data/Binds ğŸ”—/ğŸ”— Bind.md>) to the [Wallets ğŸª£](<../../ğŸ¤µğŸª£ Broker tables/Wallets ğŸ§‘â€ğŸ¦° table/ğŸ¤µ Wallets ğŸª£ table.md>) table
| ğŸ£ [`REEL`](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/ğŸ“ƒ control â–¶ï¸/REEL ğŸ£/ğŸ£ REEL âŒ˜ cmd.md>) | Respond to the [Synchronous Request ğŸš€](<../../../../30 ğŸ§© Data/Messages ğŸ“¨/ğŸ“¨â© Message flows/Sync Requests ğŸš€.md>)
|
