# ğŸ¤µ Query ğŸ“ƒ handler

> Implementation
* Part of the [Broker ğŸ¤µ domain](<../../ğŸ¤µ Broker helper/ğŸ¤µ Broker ğŸ¤² helper.md>)
* Implements both the:
    * [`Share Bind` â© flow](<../../../Wallets ğŸ§‘â€ğŸ¦°/ğŸ§‘â€ğŸ¦°ğŸ’¬ Wallet chats/...in Prompts ğŸ¤”/Share Bind ğŸ‘‰ğŸ”—ğŸ’¼/ğŸ§‘â€ğŸ¦° Share Bind â© flow.md>) 
    * [`Share Token` â© flow](<../../../Wallets ğŸ§‘â€ğŸ¦°/ğŸ§‘â€ğŸ¦°ğŸ’¬ Wallet chats/...in Prompts ğŸ¤”/Share Token ğŸ‘‰ğŸ«ğŸ’¼/ğŸ§‘â€ğŸ¦° Share Token â© flow.md>)
    * [`Share Token+ID` â© flow](<../../../Wallets ğŸ§‘â€ğŸ¦°/ğŸ§‘â€ğŸ¦°ğŸ’¬ Wallet chats/...in Prompts ğŸ¤”/Share Token+ID ğŸ‘‰ğŸ†”ğŸ’¼/ğŸ§‘â€ğŸ¦° Share Token+ID â© flow.md>)

## Script

```yaml
ğŸ“ƒ Query@Handler:

# Verify the message
- VERIFY|$.Msg

# Assert the message
- ASSERT|$.Msg:
    AllOf: Chat, Hook, Schemas
    UUIDs: Chat, Hook
    Lists: Schemas
    Schemas.Each.IsSchema:

# Get the Chat
- READ >> $chat:
    Set: Broker.Chatters
    Key: 
        Chat: $.Msg.Chat
        Domain: $.Msg.From

# Save que Query
- SAVE|Broker.Queries:
    .State: QUERIED
    $.Msg.Chat:
    $.Msg.Hook:
    $.Msg.Schemas:
    Domain: $.Msg.From
```

|Users||
|-|-
| [Commands âŒ˜](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Command âŒ˜.md>) | [`ASSERT`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for holders ğŸ§ /ASSERT ğŸš¦/ğŸš¦ ASSERT âŒ˜ cmd.md>) [`SAVE`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for datasets ğŸª£/SAVE ğŸ’¾/ğŸ’¾ SAVE âŒ˜ cmd.md>) [`READ`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for datasets ğŸª£/READ ğŸ§²/ğŸ§² READ âŒ˜ cmd.md>) [`VERIFY`](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Commands âŒ˜/âŒ˜ for messages ğŸ“¨/VERIFY ğŸ”/ğŸ” VERIFY âŒ˜ cmd.md>)
| [Datasets ğŸª£](<../../../../30 ğŸ§© Data/Datasets ğŸª£/ğŸª£ Dataset.md>) | [`Broker.Queries`](<../../ğŸ¤µğŸª£ Broker tables/Queries ğŸ’¼ table/ğŸª£ Queries/ğŸ¤µ Broker.Queries ğŸª£ table.md>) [`Broker.Chatters`](<../../ğŸ¤µğŸª£ Broker tables/Chatters ğŸ‘¥ table/ğŸª£ Chatters/ğŸ¤µ Broker.Chatters ğŸª£ table.md>)
| [Holders ğŸ§ ](<../../../../35 ğŸ’¬ Chats/Scripts ğŸ“ƒ/Holder ğŸ§ .md>) | [`$.Msg` ğŸ§  holder](<../../../../37 Scripts ğŸ“ƒ/ğŸ“ƒ Holders ğŸ§ /System holders ğŸ”©/$.Msg ğŸ“¨/ğŸ“¨ $.Msg ğŸ§  holder.md>)
|