@startuml Pop@Broker
 
participant "Wallet ğŸ‘±" as wallet

box Broker ğŸ¤µ domain #FFFFFA
    participant "Pop@ ğŸ“ƒ" as pop
    participant "Wallets ğŸª£" as wallets
    'participant "Locate@ ğŸ“ƒ" as locate
    participant "Hello@ ğŸ“ƒ" as introduced
    'participant "Wallets ğŸª£" as wallets
end box

box "Talker ğŸ˜ƒ" #FFFFFA
    participant "Engine âš™ï¸" as engine
    participant "Talkers ğŸª£" as talkers
'    participant "Pop {?} ğŸ“ƒ" as popX
end box

'participant "Vault ğŸ—„ï¸" as vault

activate wallet 
    wallet --> pop: Pop ğŸŒ {context, key}
deactivate wallet

activate pop
    pop -> wallets: READ ğŸ§²
    pop -> engine: REGISTER ğŸ”† {script}
deactivate pop

activate engine
    engine -> talkers: SAVE ğŸ’¾
    engine -> pop: {locator}
deactivate engine

activate pop
    pop --> wallet: SEND ğŸ“¬ Assess ğŸŒ {locator}
deactivate pop

'activate wallet
'    wallet --> locate: Locate ğŸŒ {locator}
'deactivate wallet

'activate locate
'    locate --> wallet: SEND ğŸ“¬ Open ğŸŒ {locator}
'deactivate locate


activate wallet
    wallet --> introduced:
deactivate wallet

activate introduced
    'introduced -> engine: CHAT ğŸ’¬
    introduced -> engine: TALK ğŸ˜ƒ
deactivate introduced

'activate popX
'deactivate popX

activate engine
    engine -> talkers: READ ğŸ§²
    engine -> : RUN ğŸƒ {script} 
deactivate engine

@enduml 
