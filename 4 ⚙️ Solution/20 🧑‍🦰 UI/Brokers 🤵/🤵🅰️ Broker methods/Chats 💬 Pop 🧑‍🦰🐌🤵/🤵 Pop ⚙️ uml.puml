@startuml Pop@Broker

 
participant "Wallet ðŸ‘±" as wallet

box Hoster â˜ï¸ domain #FFFFFA
    participant "Broker ðŸ¤µ" as broker
    participant "Wallets ðŸª£" as wallets
    participant "Bind ðŸ“ƒ" as bind
    participant "Host ðŸ“ƒ" as host
    participant "Issuer ðŸ“ƒ" as issuer
    participant "Token ðŸ“ƒ" as token
    participant "Vault ðŸ“ƒ" as vault
end box

activate wallet
wallet --> broker: Pop ðŸŒ
deactivate wallet

activate broker
    broker -> wallets: READ {wallet}

    alt Context {BIND}
        broker -> bind: RUN {PopBind}
    else Context {HOST}
        broker -> host: RUN {PopHost}
    else Context {ISSUER}
        broker -> issuer: RUN {PopIssuer}
    else Context {TOKEN}
        broker -> token: RUN {PopToken}
    else Context {VAULT}
        broker -> vault: RUN {PopVault}
    end
    
deactivate broker

@enduml 
