@startuml Locate
' ------------

actor User as user  

'box "User Interface (UI)"  #FFFFFF
  participant "Wallet ðŸ‘±" as wallet
  'participant "Notifier ðŸ“£\nbff" as notifier
  participant "Broker ðŸ¤µ" as broker
'end box

participant "Printer ðŸ–¨ï¸" as printer
participant "Finder ðŸ”Ž" as finder
participant "Host ðŸ¤—" as host


wallet --> broker: 0) Locate ðŸŒ

activate broker

    group Resolve, if .ALIAS ðŸ§© and not cached 

        broker -> printer: 1) Resolve ðŸš€

        activate printer
            printer -> broker: {host locator}
        deactivate printer

    end group

    'alt No host session?

        broker --> wallet: 2) âª Open ðŸ’¬
    deactivate broker
    
    activate wallet
        wallet --> broker: 
    deactivate wallet

    activate broker   

        broker --> finder: 3) Present â©
        deactivate broker
            activate finder
                finder --> wallet: 4) âª Prompt â“˜ {intro}
                finder --> broker
            deactivate finder
        activate broker

    'end alt

    broker --> wallet: 5) âª Prompt â“˜ {origin}
    broker --> wallet: 6) âª Prompt â“˜ {tokens}
    broker --> host:  7) Hello ðŸŒ
deactivate broker

activate host
    host --> wallet: 8) âª Prompt â“˜ {context}
    host --> wallet: 9) âª Prompt ðŸ˜ƒ {what do you need?}
deactivate host

    user --> wallet: reply
deactivate wallet


' ------------
@enduml