@startuml Handle

box Talker ðŸ˜ƒ domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant "Engine âš™ï¸" as engine
    participant "Memory ðŸ§ " as memory
    participant "Holders ðŸª£" as holders
    participant "Inbox ðŸ“¨" as inbox
end box

participant "Hosted ðŸ“¦" as hosted

activate script
    script -> engine: CALL {X into $A}
    activate engine
        engine -> memory: READ ðŸ§² {A}
    deactivate engine

    script -> engine: CALL {function} 
deactivate script


activate engine
    engine --> hosted: Handle ðŸŒ {function, hook}
activate hosted
    engine -> holders: WAIT ðŸ§˜ {hook}
deactivate engine
          
    hosted -> inbox: Placed ðŸš€ {$A}

    activate inbox
        inbox -> holders: READ ðŸ§² {A}
        inbox -> hosted: {X}
    deactivate inbox

    hosted -> inbox: Place ðŸš€ {Y into $B}
    activate inbox
        inbox -> holders: SAVE ðŸ’¾ {B:Y}
    deactivate inbox

    hosted --> inbox: Handled ðŸŒ {hook}
deactivate hosted

activate inbox
    inbox -> engine: REEL ðŸŽ£ {hook}
deactivate inbox

activate engine
    engine -> script: RETURN
deactivate engine

activate script
    script -> engine: CALL {$B}
activate engine
    engine -> script: {Y}
deactivate engine
deactivate script


@enduml