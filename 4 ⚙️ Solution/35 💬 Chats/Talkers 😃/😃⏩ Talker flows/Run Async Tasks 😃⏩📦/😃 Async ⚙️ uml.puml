@startuml Wait

participant "User ğŸ§‘" as user

box Talker ğŸ˜ƒ domain #FFFFFA
    'participant "Host ğŸ¤—\nrole API" as host
    participant "Script ğŸ“ƒ" as script
    participant "Engine âš™ï¸" as engine
    participant "Inbox ğŸ“¨" as inbox
end box
participant "Hosted ğŸ“¦" as hosted

script -> engine: ASYNC ğŸ‘·ğŸ¼
activate script
activate engine
    engine --> hosted:  Handle ğŸŒ {task, hook}
    activate hosted
    engine -> script: {hook}
deactivate engine

script --> user: âª TEMP â³ {started}

script -> engine: WAIT ğŸ§˜ {hook}
deactivate script

hosted --> inbox: Handled ğŸŒ {hook, partial}
activate inbox
    inbox -> script: REEL ğŸ£ {hook}
deactivate inbox

activate script
    script --> user: âª TEMP â³ {running...}
    script -> engine: REPEAT ğŸ” 
    script -> engine: WAIT ğŸ§˜ {hook}
deactivate script
    
    hosted --> inbox: Handled ğŸŒ {hook, done}
deactivate hosted

activate inbox
    inbox -> engine: REEL ğŸ£ {hook}
deactivate inbox

activate engine
    engine -> script
deactivate engine

activate script 
    script --> user: âª SUCCESS âœ… {done!}
deactivate script

@enduml