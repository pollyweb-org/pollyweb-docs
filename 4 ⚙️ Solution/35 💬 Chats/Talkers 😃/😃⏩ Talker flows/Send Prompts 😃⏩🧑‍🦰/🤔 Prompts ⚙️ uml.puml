@startuml SHARE
 
box Talker ðŸ˜ƒ domain #FFFFFD
    participant "Script ðŸ“ƒ" as script
    participant ".PROMPT ðŸ“ƒ" as talker
    participant "Hooks ðŸª£" as hooks
    participant "Handler ðŸ“ƒ" as handler
end box

box Hoster â˜ï¸ domain #FFFFFA
    participant "Host ðŸ¤—" as host
end box

participant "Broker ðŸ¤µ" as broker
participant "Wallet ðŸ‘±" as wallet

activate script
    script -> talker: .PROMPT ðŸ¤” 
deactivate script

activate talker
    talker -> hooks: SAVE ðŸ’¾ {hook, prompt}
    talker --> host: SEND {Prompt ðŸŒ hook}
    activate host
        host --> broker: 
    deactivate host
activate broker

    alt Non-blocking 
        alt With Options
            talker -> talker: HOOK ðŸª {hook}
        end alt
        talker -> script: RETURN { }
    else Blocking
        talker -> talker: WAIT ðŸ§˜ {hook}
    end alt

deactivate talker

    broker --> wallet:
deactivate broker

activate wallet
    wallet -> host: Prompted ðŸš€ {hook}
    
    activate host
        host -> handler
        activate handler
            handler -> hooks: GET ðŸ§² {hook}
            handler -> host: {prompt}
        deactivate handler
        host -> wallet: 
    deactivate host

    wallet --> host: Reply ðŸŒ {hook, reply}
deactivate wallet

activate host
    host -> handler: 
deactivate host

activate handler
    handler -> talker: REEL ðŸŽ£ {hook, reply}
deactivate handler

activate talker
    talker -> script: RETURN {reply}
deactivate talker

activate script
deactivate script

@enduml 
