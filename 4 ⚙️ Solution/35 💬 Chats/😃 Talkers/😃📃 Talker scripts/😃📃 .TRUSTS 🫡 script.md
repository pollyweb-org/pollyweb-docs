# ðŸ˜ƒðŸ“ƒ `.TRUSTS` ðŸ«¡ script

> [Script ðŸ“ƒ](<../ðŸ˜ƒâš™ï¸ Talker cmds/for control/ðŸ“ƒ Script.md>) that implements the [`TRUSTS`](<../ðŸ˜ƒâš™ï¸ Talker cmds/for handlers/TRUSTS ðŸ«¡.md>) command.

## How to call

```yaml
- RUN|.TRUSTS:
    Schema: my-schema
    Trusted: trusted-entity.dom
    Truster: optional-truster.dom   # Optional
    Role: CONSUMER                  # Optional
```

## Script 

```yaml
ðŸ“ƒ .TRUSTS:

# Assert inputs
- ASSERT:
    AllOf: !Schema, !Trusted
    Texts: !Schema, !Trusted, !Truster

# Assert the role
- ASSERT|!Role:
    Enum: 

# Default value for the Truster
- IF|!Truster:
    Then: EVAL|!Truster >> $truster
    Else: EVAL|$.Msg.To >> $truster

# Default value for the Role
- IF|!Role:
    Then: EVAL|!Role >> $role
    Else: EVAL|* >> $role

# Send the request
- SEND >> $answer:
    To: $.Settings.Graph
    Subject: Trusted@Graph
    Truster: $truster
    Trusted: $!Trusted
    Role: $role
    Schema: $!Schema

# Assert if it's trusted
- ASSERT:
    $answer.Trusted: True
```

Needs||
|-|-
| [Commands âŒ˜](<../ðŸ˜ƒâš™ï¸ Talker cmds/for control/âŒ˜ Command.md>) | [`ASSERT`](<../ðŸ˜ƒâš™ï¸ Talker cmds/for handlers/ASSERT ðŸš¦.md>) [`EVAL`](<../ðŸ˜ƒâš™ï¸ Talker cmds/for data/EVAL â¬‡ï¸ flow.md>) [`IF`](<../ðŸ˜ƒâš™ï¸ Talker cmds/for control/IF â¤µï¸.md>) [`SEND`](<../ðŸ˜ƒâš™ï¸ Talker cmds/for flows/$SEND ðŸ“¬ msg.md>)
| [Messages ðŸ“¨](<../../../30 ðŸ§© Data/Messages ðŸ“¨/ðŸ“¨ Message.md>) | [`Trusts@Graph`](<../../../45 ðŸ¤² Helper domains/Graphs ðŸ•¸/ðŸ•¸ðŸ…°ï¸ Graph methods/ðŸ‘¥ðŸš€ðŸ•¸ Trusts.md>)
| [Placeholders ðŸ§ ](<../ðŸ˜ƒâš™ï¸ Talker cmds/for data/$Placeholder ðŸ§ .md>) | [`$.Msg`](<../../../35 ðŸ’¬ Chats/ðŸ˜ƒ Talkers/ðŸ˜ƒâš™ï¸ Talker cmds/for handlers/$.Msg ðŸ“¨.md>) [`$.Settings`](<../ðŸ˜ƒâš™ï¸ Talker cmds/for handlers/$.Settings ðŸŽ›ï¸.md>)
|
