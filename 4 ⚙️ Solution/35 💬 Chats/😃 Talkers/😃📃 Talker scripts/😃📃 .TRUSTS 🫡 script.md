# ğŸ˜ƒğŸ“ƒ `.TRUSTS` ğŸ«¡ script

> [Script ğŸ“ƒ](<../ğŸ˜ƒâš™ï¸ Talker cmds/... âŒ˜ commands/ğŸ“ƒ Script.md>) that implements the [`TRUSTS`](<../ğŸ˜ƒâš™ï¸ Talker cmds/...messages/TRUSTS ğŸ«¡.md>) command.

> Calls the [`Trusts@Graph` ğŸ…°ï¸ method](<../../../45 ğŸ¤² Helper domains/Graphs ğŸ•¸/ğŸ•¸ğŸ…°ï¸ Graph methods/ğŸ‘¥ğŸš€ğŸ•¸ Trusts.md>)

## How to call

```yaml
- RUN|.TRUSTS:
    Schema: my-schema
    Trusted: trusted-entity.dom
    Truster: optional-truster.dom   # Optional
    Role: CONSUMER                  # Optional
```

## Script 

```yaml
ğŸ“ƒ .TRUSTS:

# Assert inputs
- ASSERT:
    AllOf: $:Schema, $:Trusted
    Texts: $:Schema, $:Trusted, $:Truster

# Assert the role
- ASSERT|$:Role:
    Enum: VAULT, CONSUMER, *

# Default value for the Truster
- IF|!Truster:
    Then: EVAL|$:Truster >> $truster
    Else: EVAL|$.Msg.To >> $truster

# Default value for the Role
- IF|!Role:
    Then: EVAL|$:Role >> $role
    Else: EVAL|* >> $role

# Send the request
- SEND >> $answer:
    To: $.Settings.Graph
    Subject: Trusted@Graph
    Truster: $truster
    Trusted: $:Trusted
    Role: $role
    Schema: $:Schema

# Assert if it's trusted
- ASSERT:
    $answer.Trusted: True
```

Needs||
|-|-
| [Commands âŒ˜](<../ğŸ˜ƒâš™ï¸ Talker cmds/... âŒ˜ commands/âŒ˜ Command.md>) | [`ASSERT`](<../ğŸ˜ƒâš™ï¸ Talker cmds/... ğŸ§  placeholders/ASSERT ğŸš¦.md>) [`EVAL`](<../ğŸ˜ƒâš™ï¸ Talker cmds/... ğŸ§  placeholders/EVAL â¬‡ï¸ flow.md>) [`IF`](<../ğŸ˜ƒâš™ï¸ Talker cmds/...control/IF â¤µï¸.md>) [`SEND`](<../ğŸ˜ƒâš™ï¸ Talker cmds/...messages/SEND ğŸ“¬ msg.md>)
| [Messages ğŸ“¨](<../../../30 ğŸ§© Data/Messages ğŸ“¨/ğŸ“¨ Message.md>) | [`Trusts@Graph`](<../../../45 ğŸ¤² Helper domains/Graphs ğŸ•¸/ğŸ•¸ğŸ…°ï¸ Graph methods/ğŸ‘¥ğŸš€ğŸ•¸ Trusts.md>)
| [Placeholders ğŸ§ ](<../ğŸ˜ƒâš™ï¸ Talker cmds/... ğŸ§  placeholders/$Placeholder ğŸ§ .md>) | [`$.Msg`](<../ğŸ˜ƒâš™ï¸ Talker cmds/...messages/$.Msg ğŸ“¨.md>) [`$.Settings`](<../ğŸ˜ƒâš™ï¸ Talker cmds/...messages/$.Settings ğŸ›ï¸.md>)
|
