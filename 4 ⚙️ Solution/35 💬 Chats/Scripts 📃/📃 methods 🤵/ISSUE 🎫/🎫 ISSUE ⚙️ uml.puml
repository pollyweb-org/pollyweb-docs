@startuml ISSUE


box Talker ðŸ˜ƒï¸ domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant ".ISSUE ðŸ“ƒ" as talker
    'participant "Consumer ðŸ’¼" as consumer
    participant "Issuer ðŸŽ´" as issuer
end box

box Itemizer ðŸ›¢  #FFFFFA
    participant "Hooks" as hooks
end box

participant "Broker ðŸ¤µ" as broker
'participant "Vault ðŸ—„ï¸" as vault
participant "Wallet ðŸ‘±" as wallet

activate script
    script -> talker: ISSUE ðŸŽ«
deactivate script

activate talker
    talker -> hooks: SAVE ðŸ’¾ {hook}
    talker --> broker: SEND ðŸ“¬ {Offer ðŸŒ hook}
activate broker
    talker -> talker: WAIT {hook}
deactivate talker

    broker --> wallet: Save ðŸŒ
deactivate broker

activate wallet
    wallet -> issuer: Issued ðŸš€ {hook}

    activate issuer
        issuer -> hooks: GET ðŸ§² {hook}
        issuer -> wallet: {offer}
    deactivate issuer

    wallet --> broker: Saved ðŸŒ
deactivate wallet

activate broker
    broker --> issuer: Accepted ðŸŒ {hook, token}
deactivate broker

activate issuer
    issuer -> talker: REEL ðŸŽ£ {hook, token}
deactivate issuer

activate talker
    talker -> script: RETURN {token}
deactivate talker

activate script
deactivate script

@enduml 
