@startuml Handle

box Talker ðŸ˜ƒ domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant ".EVAL ðŸ“ƒ" as talker
    participant "Memory ðŸ§ " as memory
    participant "Holders ðŸª£" as holders
    participant "Inbox ðŸ“¨" as inbox
end box

participant "Hosted ðŸ“¦" as hosted


activate script
    script -> talker: EVAL â¬‡ï¸ {1 into $A} 
deactivate script

activate talker
    talker -> memory: GET ðŸ§² {A}
    talker -> script: 
deactivate talker

activate script 
    script -> talker: EVAL â¬‡ï¸ {function} 
deactivate script

activate talker
    talker -> talker: hook: {.UUID}
    talker --> hosted: Handle ðŸŒ {function, hook}
activate hosted
    talker -> holders: WAIT ðŸ§˜ {hook}
deactivate talker
          
    hosted -> inbox: Placed ðŸš€ {$A}

    activate inbox
        inbox -> holders: GET ðŸ§² {A}
        inbox -> hosted: {1}
    deactivate inbox

    hosted -> inbox: Place ðŸš€ {2 into $B}
    activate inbox
        inbox -> holders: SAVE ðŸ’¾ {B:2}
        inbox -> hosted:
    deactivate inbox

    hosted --> inbox: Handled ðŸŒ {hook, 3}
deactivate hosted

activate inbox
    inbox -> talker: REEL ðŸŽ£ {hook, 3}
deactivate inbox

activate talker
    talker -> holders: GET ðŸ§² {A,B}
    talker -> memory: SAVE ðŸ’¾ {A:1,B:2}
    talker -> script: RETURN {3}
deactivate talker

activate script
    script -> talker: EVAL â¬‡ï¸ {$B}
deactivate script

activate talker
    talker -> memory: GET ðŸ§² {B}
    talker -> script: {2}
deactivate talker

activate script


@enduml