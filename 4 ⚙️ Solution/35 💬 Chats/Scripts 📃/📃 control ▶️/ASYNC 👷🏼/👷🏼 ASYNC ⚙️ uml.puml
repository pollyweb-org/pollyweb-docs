@startuml Handle

box Talker ðŸ˜ƒ domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant ".EVAL ðŸ“ƒ" as talker
    participant "Holders ðŸª£" as holders
    participant "Handler ðŸ“ƒ" as handler
end box

participant "Hosted ðŸ“¦" as hosted


activate script

    group Store 1 into memory $A
        script -> talker: EVAL {1 into $A} 
        activate talker
            talker -> talker: MEM ðŸ§  {A:1}
        deactivate talker
    end group

    script -> talker: EVAL {function} 
deactivate script

activate talker

    group Dump the memory to the database
        talker -> holders: SAVE ðŸ’¾ {A:1}
        talker -> talker: HOOK {hook} 
    end group
    
    talker --> hosted: Handle ðŸŒ {function, hook}
activate hosted
    talker -> talker: WAIT ðŸ§˜ {hook}
deactivate talker
          
    hosted -> handler: Placed ðŸš€ {$A}

    activate handler
        handler -> holders: GET ðŸ§² {A}
        handler -> hosted: {X}
    deactivate handler

    hosted -> handler: Place ðŸš€ {2 into $B}
    activate handler
        handler -> holders: SAVE ðŸ’¾ {B:2}
        handler -> hosted:
    deactivate handler

    hosted --> handler: Handled ðŸŒ {hook, 3}
deactivate hosted

activate handler
    handler -> talker: REEL ðŸŽ£ {hook, 3}
deactivate handler

activate talker
    group Load into memory
        talker -> holders: GET ðŸ§² {A, B}
        talker -> talker: MEM ðŸ§  {A:1, B:2}
    end group
    talker -> script: RETURN {3}
deactivate talker

activate script

group Evaluate $B from memory
        script -> talker: EVAL {$B}
    activate talker
        talker -> talker: MEM ðŸ§  {A}
        talker -> script: {2}
    deactivate talker
end group

deactivate script


@enduml