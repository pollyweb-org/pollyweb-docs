@startuml CHAT
' TODO

participant  "Broker ğŸ¤µ" as broker
box Host ğŸ¤— domain #FFFFFA
    participant "Inbox ğŸ“¨" as script
    participant "CHAT ğŸ’¬" as CHAT
    participant "Chats ğŸª£" as chats
    participant "Binds ğŸª£" as binds
    participant "Tokens ğŸª£" as tokens
    participant "$.Chat ğŸ§ " as holder
end box


broker -> script: {chat}

activate script
    script -> CHAT: CHAT ğŸ’¬
deactivate script

activate CHAT
    CHAT -> chats: ğŸ’¾ {OPENED}
deactivate CHAT

activate chats
    chats -> broker: Chat @ Broker ğŸš€
deactivate chats

activate broker
    broker -> chats: ğŸ’¾ {DETAILED}
deactivate broker

activate chats
    chats -> binds: READ ğŸ§²
deactivate chats

activate binds
    binds -> chats: ğŸ’¾ {BOUND}
deactivate binds

activate chats
    chats -> tokens: READ ğŸ§²
deactivate chats

activate tokens
    tokens -> chats: ğŸ’¾ {TOKENED}
deactivate tokens

activate chats
    chats -> holder: SET
deactivate chats

activate holder
    holder -> chats: ğŸ’¾ {CACHED}
deactivate holder

activate chats
    chats -> script: RACE ğŸ {cached}
deactivate chats

activate script

deactivate script

@enduml 
