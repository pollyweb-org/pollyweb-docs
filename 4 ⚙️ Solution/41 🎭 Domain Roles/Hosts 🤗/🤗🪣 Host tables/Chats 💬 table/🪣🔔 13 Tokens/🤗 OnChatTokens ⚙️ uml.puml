@startuml OnChatTokens

box Host ğŸ¤— domain #FFFFFA
    participant "Chats ğŸª£" as chats
    participant "OnTokens ğŸ””" as script
    participant "Tokens ğŸª£" as tokens
end box
participant "Graph ğŸ•¸" as graph


chats --> script: TOKENS ğŸ””

activate script
    script -> script: PARALLEL {Chat.Tokens}
    
    activate script
        alt IF self-issued
            script -> tokens: READ ğŸ§²
            script -> script: SET {token details}
        else IF third-party
            script -> graph: VERIFY ğŸ” {signature, schema}  
        end alt
    deactivate script   

    script -> chats: ğŸ’¾ CACHE

deactivate script   


@enduml 
