@startuml CHAT
' TODO

participant  "Broker ðŸ¤µ" as broker
box Host ðŸ¤— domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant ".CHAT ðŸ“ƒ" as engine
    participant "$.Chat ðŸ§ " as holder
    participant "Chats ðŸª£" as table
    participant "Binds ðŸª£" as binds
    participant "Tokens ðŸª£" as tokens
end box



activate script
    script -> engine: CHAT ðŸ’¬
deactivate script

activate engine
    engine -> broker: SEND ðŸ“¬ Chat @ Broker ðŸš€

    activate broker
        broker -> engine: { chat details }
    deactivate broker

    engine -> table: READ ðŸ§²
    engine -> binds: 
    engine -> tokens: 
    engine -> table: SAVE ðŸ’¾
    engine -> holder: SET 
    engine -> script:
deactivate engine

activate script
deactivate script

@enduml 
