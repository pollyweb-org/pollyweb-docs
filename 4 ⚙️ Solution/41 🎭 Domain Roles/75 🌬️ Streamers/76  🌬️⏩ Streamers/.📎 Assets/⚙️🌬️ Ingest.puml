@startuml Subscribe

participant "Streamer ğŸŒ¬ï¸\ndomain" as streamer

box Subscriber #FFFFFF
    participant "Buffer â³\nhelper" as buffer
    participant "Subscriber ğŸ””\ndomain" as domain
end box

group Subscribe

    activate domain
        domain --> buffer: 1) Queue ğŸŒ
    deactivate domain

    activate buffer
        buffer --> domain: 2) Queued ğŸŒ
    deactivate buffer

    activate domain
        domain --> streamer: 3) Subscribe ğŸŒ {buffer, queue}
    deactivate domain  

end group

group Stream

    'activate streamer
        streamer --> buffer: 4) Push ğŸŒ
    'deactivate streamer

    activate buffer
        buffer --> domain: 5) Wake-up ğŸŒ
    deactivate buffer

    activate domain

        loop more?
            domain -> buffer: 6) Poll ğŸš€
            domain -> buffer: 7) Confirm ğŸš€
        end loop


end group   

deactivate domain

@enduml