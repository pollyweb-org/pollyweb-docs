@startuml Wallet: Share()

box Hoster ‚òÅÔ∏è domain #FFFFFA
    participant "Script üìÉ" as script
    participant "Talker üòÉ" as talker
    participant "Consumer üíº" as consumer
end box
participant "Broker ü§µ" as broker
participant "Vault üóÑÔ∏è" as vault

activate script
    script --> talker: SHARE üíº
deactivate script

activate talker
    talker --> broker: SEND üì¨ Query üêå {hook}
activate broker
    talker -> talker: WAIT ‚è∏Ô∏è {hook}
deactivate talker

    broker --> vault: Disclose üêå {hook}
deactivate broker

activate vault
vault --> consumer: Consume üêå {hook, collect}
deactivate vault

activate consumer
    consumer -> talker: TRUSTS ü´° {vault}
    consumer -> vault: SEND üì¨ Collect üöÄ {collect}
    
    activate vault
        vault -> consumer: {data}
    deactivate vault

    consumer --> talker: REEL üé£ {hook}
deactivate consumer

activate talker
    talker --> script: RETURN ‚§¥Ô∏è {data}
deactivate talker

activate script
deactivate script

@enduml 