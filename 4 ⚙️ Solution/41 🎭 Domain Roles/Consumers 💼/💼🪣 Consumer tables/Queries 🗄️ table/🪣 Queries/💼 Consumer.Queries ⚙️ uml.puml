@startuml ðŸ’¼ Consumer.Queries ðŸª£ table
 
box Consumer ðŸ’¼ domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant "SHARE âŒ˜" as talker
    participant "Queries ðŸª£" as table
    participant "Consumer ðŸ’¼" as consumer    
end box

participant "Broker ðŸ¤µ" as broker
participant "Vault ðŸ—„ï¸" as vault

activate script
    script -> talker: SHARE ðŸ’¼ {schema}
deactivate script

activate talker
    talker -> table: SAVE ðŸ’¾ {hook}
activate table
    talker -> talker: WAIT {hook}
deactivate talker

    table --> broker: SEND ðŸ“¬ {Query ðŸŒ hook, schemas}
deactivate table

activate broker
    broker -> vault: Disclose ðŸŒ
deactivate broker

activate vault

    vault -> consumer: Context ðŸš€ {hook}

    activate consumer
        consumer -> table: READ ðŸ§² {hook}
        consumer -> vault: {context, schema}
    deactivate consumer

    vault --> consumer: Consume ðŸŒ {hook, schema, collection}
deactivate vault

activate consumer
    consumer -> vault: Collect ðŸš€ {collection}

    activate vault
        vault -> consumer: {data}
    deactivate vault

    consumer -> talker: REEL ðŸŽ£ {hook, data}
deactivate consumer

activate talker
    talker -> script: RETURN \n{schema, data}
deactivate talker

activate script
deactivate script

@enduml 
