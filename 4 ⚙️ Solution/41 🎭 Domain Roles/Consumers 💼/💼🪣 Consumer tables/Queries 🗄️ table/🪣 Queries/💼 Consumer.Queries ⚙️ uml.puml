@startuml ðŸ’¼ Consumer.Queries ðŸª£ table
 
box Consumer ðŸ’¼ domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant "SHARE âŒ˜" as talker
    participant "Queries ðŸª£" as table
    'participant "Consumer ðŸ’¼" as consumer    
end box

participant "Broker ðŸ¤µ" as broker
participant "Vault ðŸ—„ï¸" as vault

activate script
    script -> talker: SHARE ðŸ’¼ {schema}
deactivate script

activate talker
    talker -> table: ðŸ’¾ {QUERIED, query}
activate table
    talker -> talker: WAIT {query}
deactivate talker

    table --> broker: Query ðŸŒ {query, schemas}
deactivate table

activate broker
    broker -> vault: Disclose ðŸŒ
deactivate broker

activate vault

    vault -> table: Context ðŸš€ READ ðŸ§² {query}

    activate table
        table -> vault: {context}
    deactivate table

    vault --> table: Consume ðŸŒ {query, schema, collection}
deactivate vault

activate table
    table -> vault: Collect ðŸš€ {collection}

    activate vault
        vault -> table: {data}
    deactivate vault

    table -> talker: RACE ðŸ {query, data}
deactivate table

activate talker
    talker -> script: RETURN \n{schema, data}
deactivate talker

activate script
deactivate script

@enduml 
