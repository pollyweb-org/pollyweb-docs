@startuml OnQueryTrusted

box Consumer ğŸ’¼ domain #FFFFFA
    participant "Queries ğŸª£" as table
    participant "OnTrusted ğŸ””" as handler
end box
participant "Vault ğŸ—„ï¸" as vault
participant "Graph ğŸ•¸" as graph


table --> handler: TRUSTED ğŸ”” 

activate handler
    handler -> vault: SEND ğŸ“¬ {Collect@ ğŸš€}

    activate vault
        vault -> handler: {data}
    deactivate vault

    handler -> graph: VERIFY ğŸ” {schema}

    handler -x table: SAVE ğŸ’¾ {BROKEN, data}
    handler -> table: SAVE ğŸ’¾ {COLLECTED, data}

deactivate handler

@enduml 