@startuml Receive@Consumer

participant "Wallet ğŸ§‘" as wallet
box Consumer ğŸ’¼ domain #FFFFFA
    participant "Receive ğŸŒ" as consumer
    participant "Queries ğŸª£" as queries
    participant "Chats ğŸª£" as chats
end box

wallet --> consumer: Receive ğŸŒ {query}

activate consumer
    consumer -> queries: READ ğŸ§² {query}
    consumer -> chats: READ ğŸ§² {broker, chat}
    consumer -> consumer: VERIFY ğŸ” {chat.PK}
    consumer -> queries: SAVE ğŸ’¾ {RECEIVED}
deactivate consumer

@enduml 