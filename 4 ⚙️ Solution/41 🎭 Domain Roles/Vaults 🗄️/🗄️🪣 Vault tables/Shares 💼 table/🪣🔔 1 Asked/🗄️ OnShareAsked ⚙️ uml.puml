@startuml OnShareAsked

participant "Broker ğŸ¤µ" as broker

box Vault ğŸ—„ï¸ domain #FFFFFA
    'participant "Disclose ğŸŒ" as script
    participant "Shares ğŸª£" as shares
    participant "OnAsked ğŸ””" as asked
    participant "Talker ğŸ˜ƒ" as talker
end box

participant "Hosted ğŸ“¦" as hosted



broker --> shares: Disclose ğŸŒ

''activate script
''    script -> shares: SAVE ğŸ’¾ {ASKED}
''deactivate script

activate shares
    shares --> asked: ASKED ğŸ”” 
deactivate shares

activate asked
    asked -> talker: ASYNC ğŸ‘·ğŸ¼ {disclose}

activate talker
    talker --> hosted: Handle ğŸŒ {hook, disclose}
activate hosted
    talker -> asked: {hook}
deactivate talker
    asked --> asked: WAIT ğŸ§˜ {hook}
deactivate asked

    hosted --> talker: Handled ğŸŒ {hook, data}
deactivate hosted

activate talker
    talker --> asked: REEL ğŸ£ {hook, data}
deactivate talker

activate asked
    asked -> shares: UPDATE ğŸ’¾ {READY}
deactivate asked

@enduml 