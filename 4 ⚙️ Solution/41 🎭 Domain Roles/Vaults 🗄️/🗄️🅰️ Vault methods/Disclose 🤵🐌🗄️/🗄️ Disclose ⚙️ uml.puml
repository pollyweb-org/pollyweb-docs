@startuml Wallet: Share()

'participant "User ğŸ§‘" as user
participant "Broker ğŸ¤µ" as broker
participant "Consumer ğŸ’¼" as consumer
box Hoster â˜ï¸ domain #FFFFFA
    participant "Vault ğŸ—„ï¸" as vault
    'participant "Script ğŸ“ƒ" as script
    participant "Talker ğŸ˜ƒ" as talker
end box
participant "Hosted ğŸ“¦" as hosted

broker --> vault: Disclose ğŸŒ

activate vault    
    vault -> talker: TRUSTS ğŸ«¡ {consumer}
    vault -> talker: ASYNC ğŸ‘·ğŸ¼ {disclose}

activate talker
    talker --> hosted: Handle ğŸŒ {hook, disclose}
activate hosted
    talker -> vault: {hook}
deactivate talker
    vault --> vault: WAIT â¸ï¸ {hook}
deactivate vault

    hosted --> talker: Handled ğŸŒ {hook, data}
deactivate hosted

activate talker
    talker --> vault: REEL ğŸ£ {hook}
deactivate talker

activate vault
    vault -> vault: SAVE ğŸ’¾ {data}
    vault --> consumer: Consume ğŸŒ {data}
deactivate vault

@enduml 