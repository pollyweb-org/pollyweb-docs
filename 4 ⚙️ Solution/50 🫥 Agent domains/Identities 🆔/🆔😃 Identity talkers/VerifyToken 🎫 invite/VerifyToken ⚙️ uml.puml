@startuml VerifyToken

participant "Consumer ðŸ’¼" as consumer
participant "Broker ðŸ¤µ" as broker
box Identity ðŸ†” domain #FFFFFA
    participant "VerifyToken ðŸ˜ƒ" as script
    participant "Stamps ðŸª£" as tokens
    participant "Selfie ðŸ“¸" as identify
end box
participant "Wallet ðŸ‘±" as wallet


activate consumer
consumer -> broker: INVITE ðŸ¤² .\n  ID/TOKEN/PROXY ðŸ§© \n  {identity, stamp}


activate broker
    broker -> script: INVITE ðŸ¤² \n  TOKEN/VERIFY ðŸ§© {stamp}
deactivate broker

activate script
    script -> tokens: READ ðŸ§² {stamp}
    script -> identify: RUN {user}
deactivate script

activate identify
    identify -> wallet: selfie ðŸ“¸
    identify -> script: 
deactivate identify


activate script
    script -> broker: 
deactivate script

activate broker
    broker -> consumer: 
deactivate broker


    
@enduml