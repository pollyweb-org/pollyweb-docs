@startuml WEB

box Host ðŸ¤— domain #FFFFFD
    participant "Script ðŸ“ƒ" as script
    participant "WEB âŒ˜" as WEB
    participant "PROMPT âŒ˜" as PROMPT
end box
participant "Web Page ðŸŒ" as page
participant "Wallet ðŸ‘±" as wallet


activate script
    
    script -> page: prepare {hook, context}
    activate page
        page -> script: {url}   
    deactivate page

    script -> WEB: WEB ðŸŒ {text, url, hook}
deactivate script

activate WEB
    WEB -> PROMPT: RUN
deactivate WEB

activate PROMPT
    PROMPT --> wallet: Prompt@Broker ðŸŒ {text, url}
activate wallet
    PROMPT -> WEB
deactivate PROMPT

activate WEB
    WEB -> WEB: WAIT â³ {hook}
deactivate WEB


    wallet --> page: open {url}
activate page
    wallet --> page: "submit"
deactivate wallet
    page --> WEB: RACE ðŸ {hook, result}
deactivate page

activate WEB
    WEB -> script: RETURN {result}
deactivate WEB

activate script
    


@enduml