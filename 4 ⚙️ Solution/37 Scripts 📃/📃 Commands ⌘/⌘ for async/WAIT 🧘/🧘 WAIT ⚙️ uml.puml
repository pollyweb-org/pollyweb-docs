@startuml Handle

box Talker ğŸ˜ƒ domain #FFFFFA
    participant "Caller ğŸ“ƒ" as script
    participant "WAIT ğŸ§˜" as wait
    'participant "Imprints ğŸª£" as imprints
    participant "Waits ğŸª£" as waits
end box
participant "Alarm â°" as alarm

activate script
    script -> wait: WAIT ğŸ§˜ {uuid} 
deactivate script

activate wait
    wait -> waits: ğŸ’¾ {WAIT, uuid}
    activate waits
        waits -> alarm: ğŸŒ Trigger {uuid}
    deactivate waits
    activate alarm

    wait -> wait: HOOK ğŸª {uuid}
deactivate wait



    alarm -> waits: ğŸ”” Timeout ğŸ’¾ {TIMEOUT}
deactivate alarm

activate waits
    waits <- : ğŸ RACE ğŸ’¾ {RACE, result}
    'waits -> imprints: RECALL ğŸª¶ {uuid}
    waits -> wait: REEL ğŸ£ {uuid, result} (or empty)
deactivate waits

activate wait
    wait -> script: RETURN {result}
deactivate wait


activate script    
    
@enduml