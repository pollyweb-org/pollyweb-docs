@startuml VERIFY Token ðŸŽ«

box Talker ðŸ˜ƒ domain #FFFFFA
    participant "Script ðŸ“ƒ" as script
    participant "VERIFY âŒ˜ Token ðŸŽ«" as verify
end box
participant "Graph ðŸ•¸" as graph 
participant "Broker ðŸ¤µ" as broker


activate script
    script -> verify: VERIFY ðŸ” {token}

activate verify
    
    verify -x script: ðŸš¦ ASSERT .IsToken
    verify -x script: ðŸš¦ ASSERT {starts, expires}

    verify -> graph: GRAPH ðŸ•¸ PublicKey ðŸš€ {issuer, dkim}
    activate graph
        graph -> verify: {key}
    deactivate graph

    verify -x script: ðŸ” VERIFY á°ðŸ–Š Signature ðŸ’¥

    verify -> graph: GRAPH ðŸ•¸ Schema ðŸš€ {code}
    activate graph
        graph -> verify: {schema}
    deactivate graph

    verify -x script: ðŸ” VERIFY ðŸ§© Schema ðŸ’¥

    verify -> broker: SEND ðŸ“¬ Status@Broker ðŸš€ {token, issuer}
    activate broker
        broker -> verify: {status}
    deactivate broker

    verify -x script: ðŸš¦ ASSERT {active} ðŸ’¥

    verify -> script: RETURN âœ… 

deactivate verify

          
@enduml