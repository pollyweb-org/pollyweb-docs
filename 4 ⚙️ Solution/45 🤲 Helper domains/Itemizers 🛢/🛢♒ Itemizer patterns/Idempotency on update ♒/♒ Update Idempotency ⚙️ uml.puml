@startuml State machine

box sender ğŸ‘¥ domain #FFFFFA
    participant "Script ğŸ“ƒ" as script
    participant "Dataset ğŸª£ Key: hook" as table
    participant "Inbox ğŸ“¥" as inbox
end box

box receiver ğŸ‘¥ domain #FFFFFA
    participant "Handler ğŸŒ" as handler
end box


activate script
    script -> table: SAVE ğŸ’¾ {hook, STATE-1}
    script --> handler: SEND ğŸ“¬ {hook}
deactivate script

activate handler
    handler --x inbox: Message ğŸŒ {hook, result}
activate inbox
    inbox -> table: SAVE ğŸ’¾ {hook, result, STATE-2}
deactivate inbox

activate table
    <-- table  : Event ğŸ”” {STATE-2}
deactivate table


    handler --> inbox: Message ğŸŒ {hook, result}
deactivate handler

activate inbox
    inbox -> table: SAVE ğŸ’¾ {hook, result, STATE-2}
deactivate inbox

activate table
    table -> table: Ignored, no changes âŒ
deactivate table


@enduml