@startuml Optimistic concurrency 

participant "Script-A ğŸ“ƒ" as script1
participant "Dataset ğŸª£" as table
participant "Script-B ğŸ“ƒ" as script2




activate script1
activate script2

    script1 -> table: READ ğŸ§² {x:100, version:1} >> itemA
    script2 -> table: READ ğŸ§² {x:100, version:1} >> itemB

    script1 -> script1: itemA.x += 1
    script2 -> script2: itemB.x += 1

    script1 -> table: SAVE ğŸ’¾ itemA {x:101, version: 1}
activate table
    table -> script1: version: 1 -> 2 âœ…
deactivate table
deactivate script1

    script2 -> table: SAVE ğŸ’¾ itemB {x:101, version: 1}
activate table
    table -x script2: version error, retry âŒ
deactivate table
deactivate script2



@enduml