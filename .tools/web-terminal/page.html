<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Web Terminal Test Page</title>
    <style>
      :root {
        color-scheme: light dark;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        margin: 0;
        display: grid;
        place-content: center;
        min-height: 100vh;
        background: radial-gradient(circle at top, #f0f4ff, #dbe7ff);
      }

      main {
        background: rgba(255, 255, 255, 0.85);
        padding: 2rem 2.5rem;
        border-radius: 16px;
        box-shadow: 0 25px 45px rgba(15, 23, 42, 0.2);
        display: grid;
        gap: 1rem;
        max-width: 420px;
      }

      h1 {
        margin: 0;
        font-size: 1.6rem;
        color: #1d2a4b;
      }

      label {
        font-weight: 600;
        color: #334155;
      }

      input[type="text"] {
        font-size: 1rem;
        padding: 0.75rem 0.9rem;
        border: 1px solid #cbd5f5;
        border-radius: 10px;
        outline: none;
        transition: border-color 0.2s ease;
      }

      input[type="text"]:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);
      }

      button {
        padding: 0.75rem 1rem;
        font-size: 1rem;
        border: none;
        border-radius: 10px;
        background: linear-gradient(135deg, #2563eb, #0ea5e9);
        color: white;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
      }

      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 24px rgba(37, 99, 235, 0.25);
      }

      button:active {
        transform: translateY(0);
        box-shadow: none;
      }

      #status {
        font-size: 0.9rem;
        color: #475569;
        min-height: 1.2rem;
      }
    </style>
  </head>
  <body>
    <main>
      <h1>Send a Message</h1>
      <label for="message">Message to Python</label>
      <input id="message" type="text" placeholder="Type something" autocomplete="off" />
      <button id="send">Send &amp; Close</button>
      <p id="status"></p>
    </main>

    <script>
      const input = document.getElementById('message');
      const sendButton = document.getElementById('send');
      const status = document.getElementById('status');

      function sendToPython(text) {
        if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.python) {
          window.webkit.messageHandlers.python.postMessage(text);
          status.textContent = 'Message sent to Python. You can close the window if it stays open.';
        } else {
          status.textContent = 'Python bridge unavailable in this environment.';
        }
      }

      sendButton.addEventListener('click', () => {
        sendToPython(input.value);
      });

      input.addEventListener('keydown', (event) => {
        if (event.key === 'Enter') {
          event.preventDefault();
          sendToPython(input.value);
        }
      });

      input.focus();
    </script>
  </body>
</html>
