@startuml Accept()


' ----------------------
actor "User\nin chat" as user
participant "Wallet ğŸ‘±\napp" as wallet
participant "Notifier ğŸ“£\nbff" as notifier
participant "Broker ğŸ¤µ\ndomain" as broker
participant "Issuer ğŸ´\ndomain" as issuer

' ISSUE
activate issuer
    issuer --> broker: 1) Offer ğŸŒ
deactivate issuer

' REGISTER
activate broker
    broker --> wallet: 2) âª Prompt 
deactivate broker

activate wallet
    user --> wallet: save
    wallet --> broker: {Yes}
deactivate wallet

activate broker
    broker --> notifier: 3) Save ğŸŒ
deactivate broker

' NOTIFY
activate notifier
    notifier --> wallet
deactivate notifier

' ACCEPT
activate wallet
    ' DOWNLOAD
    wallet -> issuer: 4) Issued ğŸš€
    activate issuer
        issuer -> wallet: {token}
    deactivate issuer
    wallet -> wallet: save

    ' CONFIRM
    wallet --> broker: 5) Saved ğŸŒ { path }
deactivate wallet

' NOTIFY
activate broker
    broker --> wallet: 6) âª Update tokens 
    broker --> issuer: 7) Accepted ğŸŒ
deactivate broker

activate issuer
    issuer --> wallet: 8) âª Prompt 
deactivate issuer


' ----------------------
@enduml