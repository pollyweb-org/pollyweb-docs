@startuml Setup

' -----------
actor User as user
participant "Wallet ğŸ‘±\napp" as wallet
participant "Notifier ğŸ“£\nbff" as notifier
participant "Broker ğŸ¤µ\nhost" as broker
participant "Vault ğŸ—„ï¸\ndomains" as vault

' WALLET
user --> wallet: install

activate wallet

    group Register public key

        wallet -> wallet: keys*
        wallet -> notifier: 1) onboard ğŸš€ \n {public key}

        activate notifier
            notifier -> broker: 2) onboard ğŸš€
        
            ' BROKER
            activate broker
                broker -> broker: wallet*
                broker -> notifier: {wallet ID}
            'deactivate broker 

            notifier -> wallet: {wallet ID}

        deactivate notifier

    deactivate wallet
end group


group Ask for region

    broker --> wallet: 3) âª prompt region?
    deactivate broker

    activate wallet
        user --> wallet: region
        wallet --> broker: {region}
    deactivate wallet
    
    activate broker
        
end group 


group Bind agents (loop)

    broker --> vault: 4) bind â©
    broker --> wallet: âª prompt agent defaulted!

end group

broker --> wallet: âª prompt done!

deactivate broker 

' -----------
@enduml