@startuml ðŸ‘‰ Printer NFC-QR check-in
' ------------

actor User as user  

box "User Interface (UI)"  #FFFFFF
  participant "Wallet ðŸ‘±\napp" as wallet
  participant "Notifier ðŸ“£\nbff" as notifier
  participant "Broker ðŸ¤µ\nhost" as broker
end box 

participant "Host ðŸ¤—\ndomain" as host
participant "Finder ðŸ”Ž\nvault" as finder
participant "Printer ðŸ–¨ï¸\nsupplier" as printer
participant "Locator ðŸ”†\nNFC/QR" as qr


group Print locators

    host --> finder: {manifest}
    host --> printer: 1) Order ðŸŒ

    activate printer
      printer --> qr: print
    deactivate printer

end group 


user -> wallet: scan âœ¨

activate wallet
  wallet -> qr: scan âœ¨
  wallet --> broker: 2) Assess ðŸŒ {locator}
deactivate wallet


activate broker

    group Translate, if not cached

        broker -> printer: 3) Alias ðŸš€

        activate printer
            printer -> broker: {host locator}
        deactivate printer

    end group

    'alt No host session?

        broker --> wallet: 4) âª Converse

        broker --> finder: 5) Introduce â©
        deactivate broker
        
        activate finder
          finder --> broker
        deactivate finder
        
        activate broker

    'end alt

    broker --> host: 6) Hello ðŸŒ

deactivate broker


activate host
    host --> wallet: 7) âª Prompt ðŸ¤”
deactivate host

activate wallet
    user --> wallet: reply
deactivate wallet

' ------------
@enduml