@startuml Wallet: Share()


actor "User\nInterface" as user
participant "Broker ğŸ¤µ\n(domain)" as broker
participant "Consumer ğŸ’¼\n(domain)" as consumer
participant "Vault ğŸ—„ï¸\n(domain)" as vault
participant "Graph ğŸ•¸\n(domain)" as graph

' --------------------
' QUERY
' --------------------

activate consumer

group Request

    consumer --> broker: 1) Query  ğŸŒ
    deactivate consumer

    ' Broker ğŸ¤µ
    activate broker 
    broker -> graph: 2) Queryable ğŸš€ {codes}
    broker -> graph: 3) Translate ğŸš€ {codes}

    alt Select if 2+ vaults
        broker --> user: 4 âª Prompt ğŸ¤”
        deactivate broker

        activate user
            user --> broker: {selected}
        deactivate user

        activate broker
    end alt

    broker --> vault: 5) Disclose ğŸŒ {code}
    deactivate broker

    activate vault

end group

group Assess

    ' Get te context.
    vault -> consumer: 6) Context ğŸš€ 
    activate consumer
    consumer --> vault: {context}
    deactivate consumer

    ' Ask user to confirm.
    vault --> user: 7 âª Prompt ğŸ¤” {confirm?}
end group

vault --> consumer: 8 âª Consume ğŸ§©
deactivate vault 



@enduml 