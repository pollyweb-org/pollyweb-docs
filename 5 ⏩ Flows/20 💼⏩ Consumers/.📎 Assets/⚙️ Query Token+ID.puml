@startuml Wallet: Share Token


actor User as user
participant "Broker ğŸ¤µ\n(domain)" as broker
participant "Consumer ğŸ’¼\n(host)" as consumer
participant "Identity ğŸ†”\n(vault)" as identity
participant "Graph ğŸ•¸\n(domain)" as graph

' --------------------
' QUERY
' --------------------

activate consumer
consumer --> user : 1) âª Share Token



'group Request ID check

    consumer -> graph: 8) Trusts@ {identity}
    consumer --> broker: 9) Query ğŸŒ
    deactivate consumer

    activate broker
        broker --> identity: 10) Delegate ğŸŒ {ID locator}
    deactivate broker

    activate identity
        identity -> graph: 11) Trusts ğŸš€


'end group


identity --> user: 12 âª Selfie

group Confirm ID 

        identity --> consumer: 13) Selfied ğŸŒ
    deactivate identity

    ' CONSUMER
    activate consumer   
        consumer -> graph: 14) Trusts ğŸš€ {identity}

end group

    deactivate consumer

@enduml 