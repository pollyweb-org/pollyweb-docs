@startuml Wallet: Share Token


actor User as user
participant "Broker ğŸ¤µ\n(domain)" as broker
participant "Consumer ğŸ’¼\n(host)" as consumer
participant "Identity ğŸ†”\n(vault)" as identity
participant "Graph ğŸ•¸\n(domain)" as graph

' --------------------
' QUERY
' --------------------

activate consumer
consumer --> user : 1) âª Share Token ğŸ«



'group Request ID check

    consumer -> graph: 2) Trusts ğŸš€ {identity}
    consumer --> broker: 3) Verify ğŸŒ
    deactivate consumer

    activate broker
        broker --> identity: 4) Verify ğŸŒ {ID locator}
    deactivate broker

    activate identity
        identity -> graph: 5) Trusts ğŸš€


'end group


identity --> user: 6 âª Take Selfie ğŸ“¸

group Confirm ID 

        identity --> consumer: 7) Verified ğŸŒ
    deactivate identity

    ' CONSUMER
    activate consumer   
        consumer -> graph: 8) Trusts ğŸš€ {identity}

end group

    deactivate consumer

@enduml 