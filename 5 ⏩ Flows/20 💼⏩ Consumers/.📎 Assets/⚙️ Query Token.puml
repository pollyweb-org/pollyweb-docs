@startuml Wallet: Share Token


actor User as user
participant "Wallet ğŸ‘±\napp" as wallet
participant "Notifier ğŸ“£\ndomain" as notifier
participant "Broker ğŸ¤µ\ndomain" as broker

participant "Consumer ğŸ’¼\ndomain" as consumer
participant "Issuer ğŸ´\ndomain" as issuer
participant "Graph ğŸ•¸\ndomain" as graph

' --------------------
' QUERY
' --------------------

'group Share token

    'activate consumer
    consumer --> broker: 1) Query ğŸŒ
    'deactivate consumer

    activate broker
        broker -> graph: 2) Queryable ğŸš€ {codes}
        broker -> graph: 3) Translate ğŸš€ {codes}
        broker --> wallet: 4) âª Prompt ğŸ¤” {tokens}
    deactivate broker

    activate wallet
        user --> wallet: share
        wallet --> broker: {tokens}
    deactivate wallet

    activate broker
        broker --> notifier: 5) Share ğŸŒ
    deactivate broker

    activate notifier
        notifier --> wallet
    deactivate notifier

    activate wallet
        wallet --> consumer: 6) Shared ğŸŒ {tokens}
    deactivate wallet

    activate consumer
        consumer -> graph: 7) Trusts ğŸš€ {issuers}
        consumer -> graph: 8) PublicKey ğŸš€ {dkim}
    deactivate consumer

'end group 


@enduml 